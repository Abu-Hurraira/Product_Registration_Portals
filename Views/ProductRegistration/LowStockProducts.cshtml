@model IEnumerable<Product_Registration_Portal.Models.ProductModel>
@{
    ViewBag.Title = "Low Stock Products";
    Layout = null;
}

<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" />

<style>
    body {
        background: linear-gradient(135deg, #1e1e2f 0%, #2c2c44 100%);
        font-family: 'Segoe UI', sans-serif;
        min-height: 100vh;
        color: #fff;
    }

    .card {
        background: rgba(255, 255, 255, 0.05);
        border-radius: 16px;
        border: 1px solid rgba(255, 255, 255, 0.2);
        backdrop-filter: blur(8px);
        box-shadow: 0 4px 10px rgba(0, 0, 0, 0.4);
    }

    .table {
        background: transparent;
        color: #fff;
        border-collapse: collapse;
    }

        .table th, .table td {
            border: 1px solid rgba(255, 255, 255, 0.4);
            vertical-align: middle;
        }

        .table thead th {
            background: rgba(255, 255, 255, 0.1);
            font-weight: 600;
            text-align: center;
        }

        .table tbody tr:hover {
            background: rgba(255, 255, 255, 0.08);
        }

    .btn {
        border-radius: 8px;
    }
</style>

<div class="container py-5">
    <div class="d-flex justify-content-between align-items-center mb-4">
        <h2 class="fw-bold">🚨 Low Stock Products</h2>
        <a href="@Url.Action("ProductRegister", "ProductRegistration")" class="btn btn-outline-light">⬅ Back</a>
    </div>

    <div class="card p-4">
        <div class="table-responsive">
            <table class="table text-center align-middle">
                <thead>
                    <tr>
                        <th>Main Image</th>
                        <th>Hover Image</th>
                        <th>Title</th>
                        <th>Category</th>
                        <th>Price</th>
                        <th>Stock</th>
                        <th>Brand</th>
                        <th>Rating</th>
                        <th>Created At</th>
                        <th>Updated At</th>
                        <th>Is Active</th>
                    </tr>
                </thead>
                <tbody>
                    @if (Model != null && Model.Any())
                    {
                        foreach (var p in Model)
                        {
                            <tr>
                                <td>
                                    @if (!string.IsNullOrWhiteSpace(p.ImagePath))
                                    {
                                        <img src="@Url.Content(p.ImagePath)" style="width:56px;height:56px;object-fit:cover;border-radius:6px;" />
                                    }
                                </td>
                                <td>
                                    @if (!string.IsNullOrWhiteSpace(p.HoverImagePath))
                                    {
                                        <img src="@Url.Content(p.HoverImagePath)" style="width:56px;height:56px;object-fit:cover;border-radius:6px;" />
                                    }
                                </td>
                                <td>@p.Title</td>
                                <td>@p.CategoryName</td>
                                <td>@p.Price.ToString("0.00")</td>
                                <td class="text-danger fw-bold">@p.StockQuantity</td>
                                <td>@p.Brand</td>
                                <td>@(p.Rating.HasValue ? p.Rating.Value.ToString("0.00") : "-")</td>
                                <td>@p.CreatedAt.ToString("dd-MM-yyyy HH:mm")</td>
                                <td>@(p.UpdatedAt.HasValue ? p.UpdatedAt.Value.ToString("dd-MM-yyyy HH:mm") : "-")</td>
                                <td>@(p.IsProductActive ? "Yes" : "No")</td>

                            </tr>
                        }
                    }
                    else
                    {
                        <tr>
                            <td colspan="11" class="text-center text-muted">No low stock products found 🎉</td>
                        </tr>
                    }
                </tbody>
            </table>
        </div>
    </div>
</div>
